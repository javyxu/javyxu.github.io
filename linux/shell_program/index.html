<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"javyxu.cn","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Shell编程shell脚本编程构建基本脚本注释格式12345678#!&#x2F;bin&#x2F;sh# FILENAME: test_shell# AUTHOR:   Javy# Email:    xujavy@gmail.com# PURPOSE:  Demonstration of comment style# HISTORY:  1 May, 2018    Created#">
<meta property="og:type" content="article">
<meta property="og:title" content="Shell编程">
<meta property="og:url" content="https://javyxu.cn/linux/shell_program/index.html">
<meta property="og:site_name" content="Tech Blog">
<meta property="og:description" content="Shell编程shell脚本编程构建基本脚本注释格式12345678#!&#x2F;bin&#x2F;sh# FILENAME: test_shell# AUTHOR:   Javy# Email:    xujavy@gmail.com# PURPOSE:  Demonstration of comment style# HISTORY:  1 May, 2018    Created#">
<meta property="og:locale">
<meta property="article:published_time" content="2018-12-12T13:30:00.000Z">
<meta property="article:modified_time" content="2021-02-21T02:37:33.306Z">
<meta property="article:author" content="Javy">
<meta property="article:tag" content="Shell编程">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://javyxu.cn/linux/shell_program/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh'
  };
</script>

  <title>Shell编程 | Tech Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Tech Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Javy's Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-algorithm">

    <a href="/algorithm/" rel="section"><i class="fa fa-code fa-fw"></i>Algorithm</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/javyxu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh">
    <link itemprop="mainEntityOfPage" href="https://javyxu.cn/linux/shell_program/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Javy">
      <meta itemprop="description" content="You can create art and beauty on a computer.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tech Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Shell编程
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-12 21:30:00" itemprop="dateCreated datePublished" datetime="2018-12-12T21:30:00+08:00">2018-12-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-02-21 10:37:33" itemprop="dateModified" datetime="2021-02-21T10:37:33+08:00">2021-02-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Shell编程"><a href="#Shell编程" class="headerlink" title="Shell编程"></a>Shell编程</h1><h2 id="shell脚本编程"><a href="#shell脚本编程" class="headerlink" title="shell脚本编程"></a>shell脚本编程</h2><h3 id="构建基本脚本"><a href="#构建基本脚本" class="headerlink" title="构建基本脚本"></a>构建基本脚本</h3><h4 id="注释格式"><a href="#注释格式" class="headerlink" title="注释格式"></a>注释格式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;sh</span><br><span class="line"></span><br><span class="line"># FILENAME: test_shell</span><br><span class="line"># AUTHOR:   Javy</span><br><span class="line"># Email:    xujavy@gmail.com</span><br><span class="line"># PURPOSE:  Demonstration of comment style</span><br><span class="line"># HISTORY:  1 May, 2018    Created</span><br><span class="line">#           5 May, 2018    Modified to show mods</span><br></pre></td></tr></table></figure>
<h4 id="显示消息"><a href="#显示消息" class="headerlink" title="显示消息"></a>显示消息</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo This is a test</span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong></p>
<ul>
<li>-n：输出在同一行</li>
</ul>
<h4 id="使用变量"><a href="#使用变量" class="headerlink" title="使用变量"></a>使用变量</h4><h5 id="1-环境变量"><a href="#1-环境变量" class="headerlink" title="1. 环境变量"></a>1. 环境变量</h5><ul>
<li>set 显示所有的当前环境变量列表</li>
</ul>
<p>例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> display user information from the system.</span></span><br><span class="line">echo &quot;User info for userid: $USER&quot;</span><br><span class="line">echo UID: $UID</span><br><span class="line">echo HOME: $HOME</span><br></pre></td></tr></table></figure>
<h5 id="2-用户变量"><a href="#2-用户变量" class="headerlink" title="2. 用户变量"></a>2. 用户变量</h5><a id="more"></a>
<h5 id="3-命令替换"><a href="#3-命令替换" class="headerlink" title="3. 命令替换"></a>3. 命令替换</h5><ul>
<li><p>反引号字符（ `）</p>
</li>
<li><p>$()格式</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!bin/bash</span></span><br><span class="line">testing=$(date)</span><br></pre></td></tr></table></figure>
<h4 id="重定向输入和输出"><a href="#重定向输入和输出" class="headerlink" title="重定向输入和输出"></a>重定向输入和输出</h4><h5 id="1-输出重定向"><a href="#1-输出重定向" class="headerlink" title="1. 输出重定向"></a>1. 输出重定向</h5><p><code>command &gt; outputfile</code></p>
<h5 id="2-输入重定向"><a href="#2-输入重定向" class="headerlink" title="2. 输入重定向"></a>2. 输入重定向</h5><p><code>command &lt; outputfile</code></p>
<h4 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h4><h4 id="执行数学运算"><a href="#执行数学运算" class="headerlink" title="执行数学运算"></a>执行数学运算</h4><h5 id="1-expr命令"><a href="#1-expr命令" class="headerlink" title="1. expr命令"></a>1. expr命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expr 1 + 5</span><br></pre></td></tr></table></figure>
<h5 id="2-使用方括号"><a href="#2-使用方括号" class="headerlink" title="2. 使用方括号"></a>2. 使用方括号</h5><p><code>$[ operation ]</code></p>
<h5 id="3-浮点解决方案"><a href="#3-浮点解决方案" class="headerlink" title="3. 浮点解决方案"></a>3. 浮点解决方案</h5><ul>
<li>bc的基本用法</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bc -q</span><br><span class="line"></span><br><span class="line">quit</span><br></pre></td></tr></table></figure>
<h5 id="2-在脚本中使用bc"><a href="#2-在脚本中使用bc" class="headerlink" title="2. 在脚本中使用bc"></a>2. 在脚本中使用bc</h5><p><code>variable=$(echo &quot;options; expression&quot; | bc)</code></p>
<p><strong>说明：</strong></p>
<p>options：设置变量，允许多个变量可以用分号隔开。</p>
<p>expression：定义bc执行的数学表达式。</p>
<p><code>variable=$(bc &lt;&lt; EOF   options   statements   expression   EOF   )</code></p>
<h4 id="退出脚本"><a href="#退出脚本" class="headerlink" title="退出脚本"></a>退出脚本</h4><h5 id="1-查看退出状态码"><a href="#1-查看退出状态码" class="headerlink" title="1. 查看退出状态码"></a>1. 查看退出状态码</h5><p><code>$?</code>可查看退出状态</p>
<p><strong>说明：</strong></p>
<table>
<thead>
<tr>
<th>状态码</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>命令成功结束</td>
</tr>
<tr>
<td>1</td>
<td>一般性未知错误</td>
</tr>
<tr>
<td>2</td>
<td>不适合的shell执行命令</td>
</tr>
<tr>
<td>126</td>
<td>命令不可执行</td>
</tr>
<tr>
<td>127</td>
<td>没找到命令</td>
</tr>
<tr>
<td>128</td>
<td>无效的退出参数</td>
</tr>
<tr>
<td>128+x</td>
<td>与Linux信息x相关的严重错误</td>
</tr>
<tr>
<td>130</td>
<td>通过Ctrl+C终止的命令</td>
</tr>
<tr>
<td>255</td>
<td>正常范围之外的退出状态码</td>
</tr>
</tbody></table>
<h5 id="2-exit命令"><a href="#2-exit命令" class="headerlink" title="2. exit命令"></a>2. exit命令</h5><p>可以指定退出码<code>exit num</code>,num表示0～255之间的数，如果大于将以取模的形式返回。  </p>
<h3 id="使用结构化命令"><a href="#使用结构化命令" class="headerlink" title="使用结构化命令"></a>使用结构化命令</h3><h4 id="使用if-then语句"><a href="#使用if-then语句" class="headerlink" title="使用if-then语句"></a>使用if-then语句</h4><p><strong>格式：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if command then</span><br><span class="line">    commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong></p>
<p>if后面的command是一个命令，如果命令退出代码是0，then部分就会被允许，如果是其他码then部分不会被执行。</p>
<h4 id="使用if-then-else语句"><a href="#使用if-then-else语句" class="headerlink" title="使用if-then-else语句"></a>使用if-then-else语句</h4><p><strong>格式：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if command then</span><br><span class="line">  commands</span><br><span class="line">else</span><br><span class="line">  commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h4 id="嵌套if"><a href="#嵌套if" class="headerlink" title="嵌套if"></a>嵌套if</h4><h4 id="test命令"><a href="#test命令" class="headerlink" title="test命令"></a>test命令</h4><p><code>test condition</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if test condition then</span><br><span class="line">  commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>也可以写为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if [ condition ] then</span><br><span class="line">  commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>test命令可以判断的三类条件：</p>
<ul>
<li><p>数值比较</p>
</li>
<li><p>字符串比较</p>
</li>
<li><p>文件比较</p>
</li>
</ul>
<h5 id="1-数值比较"><a href="#1-数值比较" class="headerlink" title="1. 数值比较"></a>1. 数值比较</h5><table>
<thead>
<tr>
<th>比较</th>
<th>描述</th>
<th>比较命令说明</th>
</tr>
</thead>
<tbody><tr>
<td>n1 -eq n2</td>
<td>n1是否与n2相等</td>
<td>-equal</td>
</tr>
<tr>
<td>n1 -ge n2</td>
<td>n1是否大于或等于n2</td>
<td>-(greater and equal)</td>
</tr>
<tr>
<td>n1 -gt n2</td>
<td>n1是否大于n2</td>
<td>-(greater than)</td>
</tr>
<tr>
<td>n1 -le n2</td>
<td>n1是否小于或等于n2</td>
<td>-(less and equal)</td>
</tr>
<tr>
<td>n1 -lt n2</td>
<td>n1是否小于n2</td>
<td>-(less than)</td>
</tr>
<tr>
<td>n1 -ne n2</td>
<td>n1是否不等于n2</td>
<td>-(not equal)</td>
</tr>
</tbody></table>
<h5 id="2-字符串比较"><a href="#2-字符串比较" class="headerlink" title="2. 字符串比较"></a>2. 字符串比较</h5><table>
<thead>
<tr>
<th>比较</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>str1 = str2</td>
<td>str1是否与str2相同</td>
</tr>
<tr>
<td>str1 != str2</td>
<td>str1是否与str2不同</td>
</tr>
<tr>
<td>str1 &lt; str2</td>
<td>str1是否比str2小</td>
</tr>
<tr>
<td>str1 &gt; str2</td>
<td>str1是否比str2大</td>
</tr>
<tr>
<td>-n str1</td>
<td>str1的长度是否非0</td>
</tr>
<tr>
<td>-z str1</td>
<td>str1的长度是否为0</td>
</tr>
</tbody></table>
<p><strong>注：</strong> 在使用<code>&lt;</code>和<code>&gt;</code>是需要进行转义，就想这样<code>\&lt;</code>和<code>\&gt;</code>。</p>
<h5 id="3-文件比较"><a href="#3-文件比较" class="headerlink" title="3. 文件比较"></a>3. 文件比较</h5><table>
<thead>
<tr>
<th>比较</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-d file</td>
<td>file是否存在并是一个目录</td>
</tr>
<tr>
<td>-e file</td>
<td>file是否存在</td>
</tr>
<tr>
<td>-f file</td>
<td>file是否存在并是一个文件</td>
</tr>
<tr>
<td>-r file</td>
<td>file是否存在并可读</td>
</tr>
<tr>
<td>-s file</td>
<td>file是否存在并非空</td>
</tr>
<tr>
<td>-w file</td>
<td>file是否存在并可写</td>
</tr>
<tr>
<td>-x file</td>
<td>file是否存在并可执行</td>
</tr>
<tr>
<td>-o file</td>
<td>file是否存在并属当前用户所有</td>
</tr>
<tr>
<td>-G file</td>
<td>file是否存在并默认与当前用户相同</td>
</tr>
<tr>
<td>file1 -nt file2</td>
<td>file1是否比file2新</td>
</tr>
<tr>
<td>file1 -ot file2</td>
<td>file1是否比file2旧</td>
</tr>
</tbody></table>
<h4 id="复合条件测试"><a href="#复合条件测试" class="headerlink" title="复合条件测试"></a>复合条件测试</h4><ul>
<li><p>[ condition1 ] &amp;&amp; [ condition2 ]</p>
</li>
<li><p>[ condition1 ] || [ condition2 ]</p>
</li>
</ul>
<h4 id="if-then的高级特性"><a href="#if-then的高级特性" class="headerlink" title="if-then的高级特性"></a>if-then的高级特性</h4><ul>
<li><p>用于数学表达式的双括号</p>
</li>
<li><p>用于高级字符串处理功能的双方括号</p>
</li>
</ul>
<h5 id="1-使用双括号"><a href="#1-使用双括号" class="headerlink" title="1. 使用双括号"></a>1. 使用双括号</h5><p><strong>格式：</strong></p>
<p><code>(( expression ))</code></p>
<p>表达式参数符号说明：</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>val++</td>
<td>后增</td>
</tr>
<tr>
<td>val–</td>
<td>后减</td>
</tr>
<tr>
<td>++val</td>
<td>先增</td>
</tr>
<tr>
<td>–val</td>
<td>先减</td>
</tr>
<tr>
<td>!</td>
<td>逻辑求反</td>
</tr>
<tr>
<td>~</td>
<td>位求反</td>
</tr>
<tr>
<td>**</td>
<td>幂运算</td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>左位移</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>右位移</td>
</tr>
<tr>
<td>&amp;</td>
<td>位布尔和</td>
</tr>
<tr>
<td>&amp;#124</td>
<td>位布尔或</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>逻辑和</td>
</tr>
<tr>
<td>&amp;#124&amp;#124</td>
<td>逻辑或</td>
</tr>
</tbody></table>
<h5 id="2-使用双方括号"><a href="#2-使用双方括号" class="headerlink" title="2. 使用双方括号"></a>2. 使用双方括号</h5><p><code>[[ expression ]]</code></p>
<h4 id="case命令"><a href="#case命令" class="headerlink" title="case命令"></a>case命令</h4><p><strong>格式：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">case variable in</span><br><span class="line">  pattern1 | pattern2) commands1;;</span><br><span class="line">  pattern3) commands2;;</span><br><span class="line">  *) default commands;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<h3 id="更多的结构化命令"><a href="#更多的结构化命令" class="headerlink" title="更多的结构化命令"></a>更多的结构化命令</h3><h4 id="for命令"><a href="#for命令" class="headerlink" title="for命令"></a>for命令</h4><p><strong>格式：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for var in list</span><br><span class="line">do</span><br><span class="line">  commands</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h4 id="C语言风格的for命令"><a href="#C语言风格的for命令" class="headerlink" title="C语言风格的for命令"></a>C语言风格的for命令</h4><p><strong>格式：</strong></p>
<p><code>for (( variable assignment ; condition ; iteration process ))</code></p>
<p><strong>使用多个变量：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (( a=1， b=10; a &lt;= 10; a++, b-- )); do</span><br><span class="line"><span class="meta">  #</span><span class="bash">statements</span></span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h4 id="while命令"><a href="#while命令" class="headerlink" title="while命令"></a>while命令</h4><p><strong>格式：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while [ command ]</span><br><span class="line">do</span><br><span class="line">  other commands</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h4 id="until命令"><a href="#until命令" class="headerlink" title="until命令"></a>until命令</h4><p><strong>格式：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until [ command ]</span><br><span class="line">do</span><br><span class="line">  other commands</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h4 id="嵌套循环"><a href="#嵌套循环" class="headerlink" title="嵌套循环"></a>嵌套循环</h4><h4 id="循环处理文件数据"><a href="#循环处理文件数据" class="headerlink" title="循环处理文件数据"></a>循环处理文件数据</h4><h4 id="控制循环"><a href="#控制循环" class="headerlink" title="控制循环"></a>控制循环</h4><h5 id="1-break命令"><a href="#1-break命令" class="headerlink" title="1. break命令"></a>1. break命令</h5><p>跳出外部循环：break n （默认n=1）</p>
<h5 id="2-continue命令"><a href="#2-continue命令" class="headerlink" title="2. continue命令"></a>2. continue命令</h5><h4 id="处理循环的输出"><a href="#处理循环的输出" class="headerlink" title="处理循环的输出"></a>处理循环的输出</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (( i = 0; i &lt; 10; i++ )); do</span><br><span class="line"><span class="meta">  #</span><span class="bash">statements</span></span><br><span class="line">done &gt; outputfile.txt</span><br></pre></td></tr></table></figure>
<p>最后的结果使用定向输出：<code>&gt;</code></p>
<h3 id="处理用户输入"><a href="#处理用户输入" class="headerlink" title="处理用户输入"></a>处理用户输入</h3><h4 id="命令行参数"><a href="#命令行参数" class="headerlink" title="命令行参数"></a>命令行参数</h4><h5 id="1-读取参数"><a href="#1-读取参数" class="headerlink" title="1. 读取参数"></a>1. 读取参数</h5><p>位置参数变量是标准的数字：$0是程序名，$1是第一个参数，$2是第二个参数，依次类推直到第九个参数$9。</p>
<h5 id="2-抓取所有的数据"><a href="#2-抓取所有的数据" class="headerlink" title="2. 抓取所有的数据"></a>2. 抓取所有的数据</h5><p><code>$*</code>和<code>$@</code>可以抓取命令行上的所有参数。但是<code>$*</code>是当作一个参数执行，而<code>$@</code>是对每个参数进行处理</p>
<h5 id="3-移动变量"><a href="#3-移动变量" class="headerlink" title="3. 移动变量"></a>3. 移动变量</h5><p><code>shift 2</code>：移动两个位置</p>
<h5 id="4-处理选项"><a href="#4-处理选项" class="headerlink" title="4. 处理选项"></a>4. 处理选项</h5><p>分离参数和选项（<code>--</code>）</p>
<p>使用<code>getopt</code>命令：getopt optstring parameters，在脚本中使用格式:set – $(getopt -q ab:cd “$@”)</p>
<p>使用更高级的<code>getopts</code>：getopt optstring variable</p>
<h5 id="4-获得用户输入"><a href="#4-获得用户输入" class="headerlink" title="4. 获得用户输入"></a>4. 获得用户输入</h5><p><strong>read</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo -n &quot;Enter your name: &quot;</span><br><span class="line">read name</span><br><span class="line">echo &quot;Hello $name, welcome to my program. &quot;</span><br></pre></td></tr></table></figure>
<p><strong>read -p</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">read -p &quot;Enter your age: &quot; age</span><br><span class="line">days=$[ $age * 365 ]</span><br><span class="line">echo &quot;That makes you over $days days old! &quot;</span><br></pre></td></tr></table></figure>
<h5 id="2-超时"><a href="#2-超时" class="headerlink" title="2. 超时"></a>2. 超时</h5><p><strong>read -t</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if read -t 5 -p &quot;Please Enter your name: &quot; name</span><br><span class="line">then</span><br><span class="line">  echo &quot;Hello $name, welcome to my program. &quot;</span><br><span class="line">else</span><br><span class="line">  echo</span><br><span class="line">  echo &quot;Sorry， too slow！&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p><strong>read -n1</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">read -n1 -p &quot;Do you want to continue [Y/N]?: &quot; answer</span><br><span class="line">case $answer in</span><br><span class="line">Y | y) echo</span><br><span class="line">       echo &quot;fine, continue on...&quot;;;</span><br><span class="line">N | n) echo</span><br><span class="line">       echo &quot;Ok, goodbye&quot;</span><br><span class="line">       exit;;</span><br><span class="line">esac</span><br><span class="line">echo &quot;This is the end of the script&quot;</span><br></pre></td></tr></table></figure>
<h5 id="3-隐藏方式读取"><a href="#3-隐藏方式读取" class="headerlink" title="3. 隐藏方式读取"></a>3. 隐藏方式读取</h5><p><strong>read -s</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">read -s &quot;Enter your password: &quot; pass</span><br><span class="line">echo</span><br><span class="line">echo &quot;Is your password really $pass? &quot;</span><br></pre></td></tr></table></figure>
<h5 id="4-从文件中读取"><a href="#4-从文件中读取" class="headerlink" title="4. 从文件中读取"></a>4. 从文件中读取</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Count=1</span><br><span class="line">cat test | while read line</span><br><span class="line">do</span><br><span class="line">  echo &quot;Line $Count: $Line&quot;</span><br><span class="line">  Count=$[ $Count + 1 ]</span><br><span class="line">done</span><br><span class="line">echo &quot;Finished processing the file&quot;</span><br></pre></td></tr></table></figure>
<h3 id="呈现数据"><a href="#呈现数据" class="headerlink" title="呈现数据"></a>呈现数据</h3><h4 id="理解输入和输出"><a href="#理解输入和输出" class="headerlink" title="理解输入和输出"></a>理解输入和输出</h4><h5 id="1-标准文件描述符"><a href="#1-标准文件描述符" class="headerlink" title="1. 标准文件描述符"></a>1. 标准文件描述符</h5><table>
<thead>
<tr>
<th>文件描述符</th>
<th>缩写</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>STDIN</td>
<td>标准输入</td>
</tr>
<tr>
<td>1</td>
<td>STDOUT</td>
<td>标准输出</td>
</tr>
<tr>
<td>2</td>
<td>STDERR</td>
<td>标准错误</td>
</tr>
</tbody></table>
<h5 id="2-重定向错误"><a href="#2-重定向错误" class="headerlink" title="2. 重定向错误"></a>2. 重定向错误</h5><p>ls -al test 2&gt; test1 1&gt; test2</p>
<p>ls -al test &amp;&gt;test1</p>
<h4 id="在脚本中重定向输出"><a href="#在脚本中重定向输出" class="headerlink" title="在脚本中重定向输出"></a>在脚本中重定向输出</h4><h5 id="1-临时重定向"><a href="#1-临时重定向" class="headerlink" title="1. 临时重定向"></a>1. 临时重定向</h5><h5 id="2-永久重定向"><a href="#2-永久重定向" class="headerlink" title="2. 永久重定向"></a>2. 永久重定向</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">exec 1&gt;testout</span><br><span class="line"></span><br><span class="line">echo &quot;....&quot;</span><br><span class="line">echo &quot;.......&quot;</span><br></pre></td></tr></table></figure>
<h4 id="在脚本中重定向输入"><a href="#在脚本中重定向输入" class="headerlink" title="在脚本中重定向输入"></a>在脚本中重定向输入</h4><p>exec 0&lt; testfile</p>
<h4 id="创建自己的重定向"><a href="#创建自己的重定向" class="headerlink" title="创建自己的重定向"></a>创建自己的重定向</h4><h5 id="1-关闭文件描述符"><a href="#1-关闭文件描述符" class="headerlink" title="1. 关闭文件描述符"></a>1. 关闭文件描述符</h5><p>exec 3&gt;&amp;-</p>
<h4 id="列出打的开文件描述符"><a href="#列出打的开文件描述符" class="headerlink" title="列出打的开文件描述符"></a>列出打的开文件描述符</h4><p>lsof</p>
<h4 id="记录消息"><a href="#记录消息" class="headerlink" title="记录消息"></a>记录消息</h4><p>tee filename 默认会覆盖</p>
<p>tee -a filename 实现追加</p>
<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">read</span> file and create INSERT statements <span class="keyword">for</span> MySQL</span></span><br><span class="line"></span><br><span class="line">outputfile=&#x27;member.sql&#x27;</span><br><span class="line">IFS=&#x27;,&#x27;</span><br><span class="line">while read lname fname address city state zip  </span><br><span class="line">do</span><br><span class="line">  cat \&gt;&gt; $outputfile \&lt;&lt; EOF</span><br><span class="line">  INSEART INTO members (lname, fname, address, city, state, zip) VALUES (&#x27;$lname&#x27;, &#x27;$fname&#x27;, &#x27;$address&#x27;, &#x27;$city&#x27;, &#x27;$state&#x27;, &#x27;$zip&#x27;);</span><br><span class="line">  EOF</span><br><span class="line">done &lt; S&#123;1&#125;</span><br></pre></td></tr></table></figure>
<h3 id="控制脚本"><a href="#控制脚本" class="headerlink" title="控制脚本"></a>控制脚本</h3><h4 id="处理信号"><a href="#处理信号" class="headerlink" title="处理信号"></a>处理信号</h4><h5 id="1-重温Linux信号"><a href="#1-重温Linux信号" class="headerlink" title="1. 重温Linux信号"></a>1. 重温Linux信号</h5><table>
<thead>
<tr>
<th>信号</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>SIGHUP</td>
<td>挂起进程</td>
</tr>
<tr>
<td>2</td>
<td>SIGINT</td>
<td>终止进程</td>
</tr>
<tr>
<td>3</td>
<td>SIGQUIT</td>
<td>停止进程</td>
</tr>
<tr>
<td>9</td>
<td>SIGKILL</td>
<td>无条件终止进程</td>
</tr>
<tr>
<td>15</td>
<td>SIGTRERM</td>
<td>尽可能终止进程</td>
</tr>
<tr>
<td>17</td>
<td>SIGSTOP</td>
<td>无条件停止进程但不是终止进程</td>
</tr>
<tr>
<td>18</td>
<td>SIGTSTP</td>
<td>停止或暂停进程，但不终止进程</td>
</tr>
<tr>
<td>19</td>
<td>SIGCONT</td>
<td>继续运行停止的进程</td>
</tr>
</tbody></table>
<h5 id="2-生成信号"><a href="#2-生成信号" class="headerlink" title="2. 生成信号"></a>2. 生成信号</h5><ul>
<li>中断进程</li>
</ul>
<p>Ctrl + C</p>
<ul>
<li>暂停进程</li>
</ul>
<p>Ctrl + Z</p>
<h5 id="3-捕获信号"><a href="#3-捕获信号" class="headerlink" title="3. 捕获信号"></a>3. 捕获信号</h5><p><strong>格式：</strong></p>
<p>tarp commands signals</p>
<h5 id="4-捕获脚本退出"><a href="#4-捕获脚本退出" class="headerlink" title="4. 捕获脚本退出"></a>4. 捕获脚本退出</h5><p>tarp commands signals EXIT</p>
<h5 id="5-修改或移除捕获"><a href="#5-修改或移除捕获" class="headerlink" title="5. 修改或移除捕获"></a>5. 修改或移除捕获</h5><h4 id="以后台模式运行脚本"><a href="#以后台模式运行脚本" class="headerlink" title="以后台模式运行脚本"></a>以后台模式运行脚本</h4><h5 id="1-以后台运行脚本"><a href="#1-以后台运行脚本" class="headerlink" title="1. 以后台运行脚本"></a>1. 以后台运行脚本</h5><p>./test.sh &amp;</p>
<h5 id="2-运行多个后台作业"><a href="#2-运行多个后台作业" class="headerlink" title="2. 运行多个后台作业"></a>2. 运行多个后台作业</h5><h4 id="在非控制台下运行脚本"><a href="#在非控制台下运行脚本" class="headerlink" title="在非控制台下运行脚本"></a>在非控制台下运行脚本</h4><p><strong>格式：</strong></p>
<p>nohup ./test.sh &amp;</p>
<h4 id="作业控制"><a href="#作业控制" class="headerlink" title="作业控制"></a>作业控制</h4><h5 id="1-查看作业"><a href="#1-查看作业" class="headerlink" title="1. 查看作业"></a>1. 查看作业</h5><p>jobs</p>
<p><strong>参数说明：</strong><br>| 参数 | 描述 |<br>| — | —- |<br>| -l | 列出进程的PID以及作业号 |<br>| -n | 只列出上次shell发出的通知后改变了状态的作业 |<br>| -p | 只列出作业的PID |<br>| -r | 只列出运行中的作业 |<br>| -s | 只列出已停止的作业 |</p>
<h5 id="2-重启停止的作业"><a href="#2-重启停止的作业" class="headerlink" title="2. 重启停止的作业"></a>2. 重启停止的作业</h5><p>后台模式运行：bg id</p>
<p>前台模式运行：fg id</p>
<h4 id="调整谦让度"><a href="#调整谦让度" class="headerlink" title="调整谦让度"></a>调整谦让度</h4><h5 id="1-nice命令"><a href="#1-nice命令" class="headerlink" title="1. nice命令"></a>1. nice命令</h5><p>nice -n：指定新的优先级级别</p>
<h5 id="2-renice命令"><a href="#2-renice命令" class="headerlink" title="2. renice命令"></a>2. renice命令</h5><p>renice -n 10 -p 5055</p>
<h4 id="定时运行作业"><a href="#定时运行作业" class="headerlink" title="定时运行作业"></a>定时运行作业</h4><h5 id="1-用at命令来计划执行作业"><a href="#1-用at命令来计划执行作业" class="headerlink" title="1. 用at命令来计划执行作业"></a>1. 用at命令来计划执行作业</h5><ol>
<li>at命令的格式</li>
</ol>
<p><strong>格式：</strong></p>
<p>at [ -f filename ] time</p>
<p>at -f test.sh now</p>
<ol start="2">
<li>列出等待的作业</li>
</ol>
<p>atq可以查看系统中等待的作业</p>
<ol start="3">
<li>删除作业</li>
</ol>
<p>arrm删除等待的作业</p>
<h5 id="2-安排需要定期执行的脚本"><a href="#2-安排需要定期执行的脚本" class="headerlink" title="2. 安排需要定期执行的脚本"></a>2. 安排需要定期执行的脚本</h5><ol>
<li>cron时间表</li>
</ol>
<p><strong>格式：</strong></p>
<p>min hour dayofmonth month dayofweek command</p>
<ol start="2">
<li>构建cron时间表</li>
</ol>
<p>crontb -l：列出时间表</p>
<ol start="3">
<li>浏览cron目录</li>
</ol>
<p>包括：hourly、daily、monthly、weekly</p>
<p>ls /etc/cron.*ly</p>
<ol start="4">
<li>anacron程序</li>
</ol>
<p><strong>格式：</strong></p>
<p>period delay identifier command</p>
<h2 id="高级shell脚本编程"><a href="#高级shell脚本编程" class="headerlink" title="高级shell脚本编程"></a>高级shell脚本编程</h2><h3 id="创建函数"><a href="#创建函数" class="headerlink" title="创建函数"></a>创建函数</h3><h4 id="基本的脚本函数"><a href="#基本的脚本函数" class="headerlink" title="基本的脚本函数"></a>基本的脚本函数</h4><h5 id="1-创建函数"><a href="#1-创建函数" class="headerlink" title="1. 创建函数"></a>1. 创建函数</h5><p>function name {<br>  commands<br>}</p>
<p>name() {<br>  commands<br>}</p>
<h5 id="2-使用函数"><a href="#2-使用函数" class="headerlink" title="2. 使用函数"></a>2. 使用函数</h5><h4 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h4><ul>
<li>默认退出状态码</li>
</ul>
<p>$?</p>
<ul>
<li>使用return命令</li>
</ul>
<p><strong>注意：</strong> 函数一结束就取返回值；退出状态码必须是0～255。</p>
<ul>
<li>使用函数输出</li>
</ul>
<h4 id="在函数中使用变量"><a href="#在函数中使用变量" class="headerlink" title="在函数中使用变量"></a>在函数中使用变量</h4><p>局部变量：local temp</p>
<h4 id="数组变量和函数"><a href="#数组变量和函数" class="headerlink" title="数组变量和函数"></a>数组变量和函数</h4><h3 id="图形化桌面环境中的脚本编程"><a href="#图形化桌面环境中的脚本编程" class="headerlink" title="图形化桌面环境中的脚本编程"></a>图形化桌面环境中的脚本编程</h3><h3 id="初识sed和gawk"><a href="#初识sed和gawk" class="headerlink" title="初识sed和gawk"></a>初识sed和gawk</h3><h4 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h4><h5 id="1-sed编辑器"><a href="#1-sed编辑器" class="headerlink" title="1. sed编辑器"></a>1. sed编辑器</h5><p>sed：stream editor</p>
<p><strong>说明：</strong></p>
<ol>
<li><p>一次从输入中读取一行数据</p>
</li>
<li><p>根据所提供的编辑器命令匹配数据</p>
</li>
<li><p>按照命令修改流中的数据</p>
</li>
<li><p>将新的数据输出到STDOUT。</p>
</li>
</ol>
<p><strong>格式：</strong></p>
<p>sed options script file</p>
<p><strong>选项：</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-e script</td>
<td>在处理输入时，将script中指定的命令添加到已有的命令中</td>
</tr>
<tr>
<td>-f file</td>
<td>在处理输入时，将file中指定的命令添加到已有的命令中</td>
</tr>
<tr>
<td>-n</td>
<td>不产生命令输出，使用print命令完成输出</td>
</tr>
</tbody></table>
<ol>
<li><strong>格式：</strong></li>
</ol>
<p>sed ‘s/test/big test/‘</p>
<p>例如：</p>
<p>echo “this is a test” | sed ‘s/test/big test/‘</p>
<p>sed ‘s/dog/cat/‘ data.txt</p>
<ol start="2">
<li><strong>执行多个命令格式：</strong></li>
</ol>
<p>sed -e ‘e/brown/green/;s/dog/cat/‘ data.txt</p>
<ol start="3">
<li><strong>从文件中读取编辑器命令</strong></li>
</ol>
<p>sed -f file.sed data.txt</p>
<h5 id="2-gawk程序"><a href="#2-gawk程序" class="headerlink" title="2. gawk程序"></a>2. gawk程序</h5><ol>
<li>gawk命令格式</li>
</ol>
<p>gawk options program file</p>
<p><strong>可用选项：</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-F fs</td>
<td>指定行中划分数据字段的字段分隔符</td>
</tr>
<tr>
<td>-f file</td>
<td>从指定的文件中读取程序</td>
</tr>
<tr>
<td>-v var=value</td>
<td>定义gawk程序中的一个变量及其默认值</td>
</tr>
<tr>
<td>-mf N</td>
<td>指定要处理的数据文件中的最大字段数</td>
</tr>
<tr>
<td>-mr N</td>
<td>指定数据文件中的最大数据行数</td>
</tr>
<tr>
<td>-W keyword</td>
<td>指定gawk的兼容模式或警告等级</td>
</tr>
</tbody></table>
<ol start="2">
<li>从命令行读取程序脚本</li>
</ol>
<p>grawk ‘{print “Hello World!”}’</p>
<ol start="3">
<li>使用数据字段变量</li>
</ol>
<p>$0:代表整个文本行</p>
<p>$1:代表文本行中的第1个数据字段</p>
<p>$2:代表文本行中的第2个数据字段</p>
<p>$n:代表文本行中的第n个数据字段</p>
<h4 id="sde编辑器基础"><a href="#sde编辑器基础" class="headerlink" title="sde编辑器基础"></a>sde编辑器基础</h4><h5 id="1-更多的替换选项"><a href="#1-更多的替换选项" class="headerlink" title="1. 更多的替换选项"></a>1. 更多的替换选项</h5><ol>
<li>替换标记</li>
</ol>
<p>s/pattern/replacement/flags</p>
<p><strong>flags：</strong></p>
<ul>
<li><p>数字：将新文本替换第几行模式匹配的地方</p>
</li>
<li><p>g：替换所有</p>
</li>
<li><p>p：原先行的内容要打印出来</p>
</li>
<li><p>w：file，将替换的结果写到文件中</p>
</li>
</ul>
<ol start="2">
<li>替换字符</li>
</ol>
<p><code>/</code></p>
<h5 id="2-使用地址"><a href="#2-使用地址" class="headerlink" title="2. 使用地址"></a>2. 使用地址</h5><p>行寻址（line addressing）</p>
<ul>
<li><p>以数字形式表示行区间</p>
</li>
<li><p>用文本模式来过滤出行</p>
</li>
</ul>
<p><strong>格式：</strong></p>
<p>[address] command</p>
<p>address{<br>  command1<br>  command2<br>  command3<br>}</p>
<ol>
<li>数字方式的行寻址</li>
</ol>
<p>sed ‘2s/dog/cat’ data.txt</p>
<p>sed ‘2,3s/dog/cat’ data.txt</p>
<p>sed ‘2,$s/dog/cat’ data.txt</p>
<ol start="2">
<li>使用文本模式过滤器</li>
</ol>
<p><strong>格式：</strong></p>
<p><em>/pattern/command</em></p>
<ol start="3">
<li>命令组合</li>
</ol>
<h5 id="3-删除行"><a href="#3-删除行" class="headerlink" title="3. 删除行"></a>3. 删除行</h5><p>sed ‘d’ data.txt</p>
<h5 id="4-插入和附加文本"><a href="#4-插入和附加文本" class="headerlink" title="4. 插入和附加文本"></a>4. 插入和附加文本</h5><ul>
<li>insert命令i</li>
<li>append命令a</li>
</ul>
<p><strong>格式：</strong></p>
<p>sed ‘[address]command\new line’</p>
<p><strong>举例：</strong></p>
<p>sed ‘i\Test line 1’</p>
<p>sed ‘a\test line 1’</p>
<h5 id="5-修改行"><a href="#5-修改行" class="headerlink" title="5. 修改行"></a>5. 修改行</h5><p>sed ‘3c\t xxxx’ data.txt</p>
<h4 id="转换命令"><a href="#转换命令" class="headerlink" title="转换命令"></a>转换命令</h4><p>[address]y/inchars/outchars</p>
<h4 id="回顾打印"><a href="#回顾打印" class="headerlink" title="回顾打印"></a>回顾打印</h4>
    </div>

    
    
    
        <div class="reward-container">
  <div>原创技术分享，您的支持将鼓励我继续创作</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="Javy WeChat Pay">
        <p>WeChat Pay</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="Javy Alipay">
        <p>Alipay</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Shell%E7%BC%96%E7%A8%8B/" rel="tag"># Shell编程</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/c++/pureVirtual_virtual/" rel="prev" title="C++中的虚函数和纯虚函数">
      <i class="fa fa-chevron-left"></i> C++中的虚函数和纯虚函数
    </a></div>
      <div class="post-nav-item">
    <a href="/linux/makefile/" rel="next" title="编写makefile">
      编写makefile <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Shell%E7%BC%96%E7%A8%8B"><span class="nav-number">1.</span> <span class="nav-text">Shell编程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B"><span class="nav-number">1.1.</span> <span class="nav-text">shell脚本编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E5%9F%BA%E6%9C%AC%E8%84%9A%E6%9C%AC"><span class="nav-number">1.1.1.</span> <span class="nav-text">构建基本脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E9%87%8A%E6%A0%BC%E5%BC%8F"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">注释格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E6%B6%88%E6%81%AF"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">显示消息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"><span class="nav-number">1.1.1.3.</span> <span class="nav-text">使用变量</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">1.1.1.3.1.</span> <span class="nav-text">1. 环境变量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E7%94%A8%E6%88%B7%E5%8F%98%E9%87%8F"><span class="nav-number">1.1.1.3.2.</span> <span class="nav-text">2. 用户变量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E5%91%BD%E4%BB%A4%E6%9B%BF%E6%8D%A2"><span class="nav-number">1.1.1.3.3.</span> <span class="nav-text">3. 命令替换</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA"><span class="nav-number">1.1.1.4.</span> <span class="nav-text">重定向输入和输出</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">1.1.1.4.1.</span> <span class="nav-text">1. 输出重定向</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">1.1.1.4.2.</span> <span class="nav-text">2. 输入重定向</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%A1%E9%81%93"><span class="nav-number">1.1.1.5.</span> <span class="nav-text">管道</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97"><span class="nav-number">1.1.1.6.</span> <span class="nav-text">执行数学运算</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-expr%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.1.6.1.</span> <span class="nav-text">1. expr命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%8B%AC%E5%8F%B7"><span class="nav-number">1.1.1.6.2.</span> <span class="nav-text">2. 使用方括号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E6%B5%AE%E7%82%B9%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="nav-number">1.1.1.6.3.</span> <span class="nav-text">3. 浮点解决方案</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E5%9C%A8%E8%84%9A%E6%9C%AC%E4%B8%AD%E4%BD%BF%E7%94%A8bc"><span class="nav-number">1.1.1.6.4.</span> <span class="nav-text">2. 在脚本中使用bc</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%80%E5%87%BA%E8%84%9A%E6%9C%AC"><span class="nav-number">1.1.1.7.</span> <span class="nav-text">退出脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E6%9F%A5%E7%9C%8B%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81%E7%A0%81"><span class="nav-number">1.1.1.7.1.</span> <span class="nav-text">1. 查看退出状态码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-exit%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.1.7.2.</span> <span class="nav-text">2. exit命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%BB%93%E6%9E%84%E5%8C%96%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.2.</span> <span class="nav-text">使用结构化命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8if-then%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">使用if-then语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8if-then-else%E8%AF%AD%E5%8F%A5"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">使用if-then-else语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97if"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">嵌套if</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#test%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">test命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E6%95%B0%E5%80%BC%E6%AF%94%E8%BE%83"><span class="nav-number">1.1.2.4.1.</span> <span class="nav-text">1. 数值比较</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83"><span class="nav-number">1.1.2.4.2.</span> <span class="nav-text">2. 字符串比较</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E6%96%87%E4%BB%B6%E6%AF%94%E8%BE%83"><span class="nav-number">1.1.2.4.3.</span> <span class="nav-text">3. 文件比较</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%8D%E5%90%88%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95"><span class="nav-number">1.1.2.5.</span> <span class="nav-text">复合条件测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#if-then%E7%9A%84%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7"><span class="nav-number">1.1.2.6.</span> <span class="nav-text">if-then的高级特性</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E4%BD%BF%E7%94%A8%E5%8F%8C%E6%8B%AC%E5%8F%B7"><span class="nav-number">1.1.2.6.1.</span> <span class="nav-text">1. 使用双括号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8%E5%8F%8C%E6%96%B9%E6%8B%AC%E5%8F%B7"><span class="nav-number">1.1.2.6.2.</span> <span class="nav-text">2. 使用双方括号</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#case%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.2.7.</span> <span class="nav-text">case命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E5%A4%9A%E7%9A%84%E7%BB%93%E6%9E%84%E5%8C%96%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.3.</span> <span class="nav-text">更多的结构化命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#for%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">for命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#C%E8%AF%AD%E8%A8%80%E9%A3%8E%E6%A0%BC%E7%9A%84for%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.3.2.</span> <span class="nav-text">C语言风格的for命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#while%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.3.3.</span> <span class="nav-text">while命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#until%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.3.4.</span> <span class="nav-text">until命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97%E5%BE%AA%E7%8E%AF"><span class="nav-number">1.1.3.5.</span> <span class="nav-text">嵌套循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E6%95%B0%E6%8D%AE"><span class="nav-number">1.1.3.6.</span> <span class="nav-text">循环处理文件数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E5%BE%AA%E7%8E%AF"><span class="nav-number">1.1.3.7.</span> <span class="nav-text">控制循环</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-break%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.3.7.1.</span> <span class="nav-text">1. break命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-continue%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.3.7.2.</span> <span class="nav-text">2. continue命令</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E5%BE%AA%E7%8E%AF%E7%9A%84%E8%BE%93%E5%87%BA"><span class="nav-number">1.1.3.8.</span> <span class="nav-text">处理循环的输出</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5"><span class="nav-number">1.1.4.</span> <span class="nav-text">处理用户输入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="nav-number">1.1.4.1.</span> <span class="nav-text">命令行参数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E8%AF%BB%E5%8F%96%E5%8F%82%E6%95%B0"><span class="nav-number">1.1.4.1.1.</span> <span class="nav-text">1. 读取参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E6%8A%93%E5%8F%96%E6%89%80%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">1.1.4.1.2.</span> <span class="nav-text">2. 抓取所有的数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E7%A7%BB%E5%8A%A8%E5%8F%98%E9%87%8F"><span class="nav-number">1.1.4.1.3.</span> <span class="nav-text">3. 移动变量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-%E5%A4%84%E7%90%86%E9%80%89%E9%A1%B9"><span class="nav-number">1.1.4.1.4.</span> <span class="nav-text">4. 处理选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-%E8%8E%B7%E5%BE%97%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5"><span class="nav-number">1.1.4.1.5.</span> <span class="nav-text">4. 获得用户输入</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E8%B6%85%E6%97%B6"><span class="nav-number">1.1.4.1.6.</span> <span class="nav-text">2. 超时</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E9%9A%90%E8%97%8F%E6%96%B9%E5%BC%8F%E8%AF%BB%E5%8F%96"><span class="nav-number">1.1.4.1.7.</span> <span class="nav-text">3. 隐藏方式读取</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-%E4%BB%8E%E6%96%87%E4%BB%B6%E4%B8%AD%E8%AF%BB%E5%8F%96"><span class="nav-number">1.1.4.1.8.</span> <span class="nav-text">4. 从文件中读取</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%88%E7%8E%B0%E6%95%B0%E6%8D%AE"><span class="nav-number">1.1.5.</span> <span class="nav-text">呈现数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%90%86%E8%A7%A3%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA"><span class="nav-number">1.1.5.1.</span> <span class="nav-text">理解输入和输出</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E6%A0%87%E5%87%86%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="nav-number">1.1.5.1.1.</span> <span class="nav-text">1. 标准文件描述符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E9%87%8D%E5%AE%9A%E5%90%91%E9%94%99%E8%AF%AF"><span class="nav-number">1.1.5.1.2.</span> <span class="nav-text">2. 重定向错误</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E8%84%9A%E6%9C%AC%E4%B8%AD%E9%87%8D%E5%AE%9A%E5%90%91%E8%BE%93%E5%87%BA"><span class="nav-number">1.1.5.2.</span> <span class="nav-text">在脚本中重定向输出</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E4%B8%B4%E6%97%B6%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">1.1.5.2.1.</span> <span class="nav-text">1. 临时重定向</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E6%B0%B8%E4%B9%85%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">1.1.5.2.2.</span> <span class="nav-text">2. 永久重定向</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E8%84%9A%E6%9C%AC%E4%B8%AD%E9%87%8D%E5%AE%9A%E5%90%91%E8%BE%93%E5%85%A5"><span class="nav-number">1.1.5.3.</span> <span class="nav-text">在脚本中重定向输入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">1.1.5.4.</span> <span class="nav-text">创建自己的重定向</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E5%85%B3%E9%97%AD%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="nav-number">1.1.5.4.1.</span> <span class="nav-text">1. 关闭文件描述符</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%97%E5%87%BA%E6%89%93%E7%9A%84%E5%BC%80%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="nav-number">1.1.5.5.</span> <span class="nav-text">列出打的开文件描述符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AF"><span class="nav-number">1.1.5.6.</span> <span class="nav-text">记录消息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B"><span class="nav-number">1.1.5.7.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E8%84%9A%E6%9C%AC"><span class="nav-number">1.1.6.</span> <span class="nav-text">控制脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E4%BF%A1%E5%8F%B7"><span class="nav-number">1.1.6.1.</span> <span class="nav-text">处理信号</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E9%87%8D%E6%B8%A9Linux%E4%BF%A1%E5%8F%B7"><span class="nav-number">1.1.6.1.1.</span> <span class="nav-text">1. 重温Linux信号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E7%94%9F%E6%88%90%E4%BF%A1%E5%8F%B7"><span class="nav-number">1.1.6.1.2.</span> <span class="nav-text">2. 生成信号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E6%8D%95%E8%8E%B7%E4%BF%A1%E5%8F%B7"><span class="nav-number">1.1.6.1.3.</span> <span class="nav-text">3. 捕获信号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-%E6%8D%95%E8%8E%B7%E8%84%9A%E6%9C%AC%E9%80%80%E5%87%BA"><span class="nav-number">1.1.6.1.4.</span> <span class="nav-text">4. 捕获脚本退出</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-%E4%BF%AE%E6%94%B9%E6%88%96%E7%A7%BB%E9%99%A4%E6%8D%95%E8%8E%B7"><span class="nav-number">1.1.6.1.5.</span> <span class="nav-text">5. 修改或移除捕获</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A5%E5%90%8E%E5%8F%B0%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="nav-number">1.1.6.2.</span> <span class="nav-text">以后台模式运行脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E4%BB%A5%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="nav-number">1.1.6.2.1.</span> <span class="nav-text">1. 以后台运行脚本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E8%BF%90%E8%A1%8C%E5%A4%9A%E4%B8%AA%E5%90%8E%E5%8F%B0%E4%BD%9C%E4%B8%9A"><span class="nav-number">1.1.6.2.2.</span> <span class="nav-text">2. 运行多个后台作业</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E9%9D%9E%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%8B%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="nav-number">1.1.6.3.</span> <span class="nav-text">在非控制台下运行脚本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6"><span class="nav-number">1.1.6.4.</span> <span class="nav-text">作业控制</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E6%9F%A5%E7%9C%8B%E4%BD%9C%E4%B8%9A"><span class="nav-number">1.1.6.4.1.</span> <span class="nav-text">1. 查看作业</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E9%87%8D%E5%90%AF%E5%81%9C%E6%AD%A2%E7%9A%84%E4%BD%9C%E4%B8%9A"><span class="nav-number">1.1.6.4.2.</span> <span class="nav-text">2. 重启停止的作业</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B0%83%E6%95%B4%E8%B0%A6%E8%AE%A9%E5%BA%A6"><span class="nav-number">1.1.6.5.</span> <span class="nav-text">调整谦让度</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-nice%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.6.5.1.</span> <span class="nav-text">1. nice命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-renice%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.6.5.2.</span> <span class="nav-text">2. renice命令</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E8%BF%90%E8%A1%8C%E4%BD%9C%E4%B8%9A"><span class="nav-number">1.1.6.6.</span> <span class="nav-text">定时运行作业</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E7%94%A8at%E5%91%BD%E4%BB%A4%E6%9D%A5%E8%AE%A1%E5%88%92%E6%89%A7%E8%A1%8C%E4%BD%9C%E4%B8%9A"><span class="nav-number">1.1.6.6.1.</span> <span class="nav-text">1. 用at命令来计划执行作业</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E5%AE%89%E6%8E%92%E9%9C%80%E8%A6%81%E5%AE%9A%E6%9C%9F%E6%89%A7%E8%A1%8C%E7%9A%84%E8%84%9A%E6%9C%AC"><span class="nav-number">1.1.6.6.2.</span> <span class="nav-text">2. 安排需要定期执行的脚本</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B"><span class="nav-number">1.2.</span> <span class="nav-text">高级shell脚本编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="nav-number">1.2.1.</span> <span class="nav-text">创建函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E8%84%9A%E6%9C%AC%E5%87%BD%E6%95%B0"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">基本的脚本函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="nav-number">1.2.1.1.1.</span> <span class="nav-text">1. 创建函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0"><span class="nav-number">1.2.1.1.2.</span> <span class="nav-text">2. 使用函数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">返回值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E5%87%BD%E6%95%B0%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">在函数中使用变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E5%8F%98%E9%87%8F%E5%92%8C%E5%87%BD%E6%95%B0"><span class="nav-number">1.2.1.4.</span> <span class="nav-text">数组变量和函数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BE%E5%BD%A2%E5%8C%96%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B"><span class="nav-number">1.2.2.</span> <span class="nav-text">图形化桌面环境中的脚本编程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E8%AF%86sed%E5%92%8Cgawk"><span class="nav-number">1.2.3.</span> <span class="nav-text">初识sed和gawk</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">文本处理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-sed%E7%BC%96%E8%BE%91%E5%99%A8"><span class="nav-number">1.2.3.1.1.</span> <span class="nav-text">1. sed编辑器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-gawk%E7%A8%8B%E5%BA%8F"><span class="nav-number">1.2.3.1.2.</span> <span class="nav-text">2. gawk程序</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sde%E7%BC%96%E8%BE%91%E5%99%A8%E5%9F%BA%E7%A1%80"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">sde编辑器基础</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E6%9B%B4%E5%A4%9A%E7%9A%84%E6%9B%BF%E6%8D%A2%E9%80%89%E9%A1%B9"><span class="nav-number">1.2.3.2.1.</span> <span class="nav-text">1. 更多的替换选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8%E5%9C%B0%E5%9D%80"><span class="nav-number">1.2.3.2.2.</span> <span class="nav-text">2. 使用地址</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E5%88%A0%E9%99%A4%E8%A1%8C"><span class="nav-number">1.2.3.2.3.</span> <span class="nav-text">3. 删除行</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-%E6%8F%92%E5%85%A5%E5%92%8C%E9%99%84%E5%8A%A0%E6%96%87%E6%9C%AC"><span class="nav-number">1.2.3.2.4.</span> <span class="nav-text">4. 插入和附加文本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-%E4%BF%AE%E6%94%B9%E8%A1%8C"><span class="nav-number">1.2.3.2.5.</span> <span class="nav-text">5. 修改行</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BD%AC%E6%8D%A2%E5%91%BD%E4%BB%A4"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">转换命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%9E%E9%A1%BE%E6%89%93%E5%8D%B0"><span class="nav-number">1.2.3.4.</span> <span class="nav-text">回顾打印</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Javy"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Javy</p>
  <div class="site-description" itemprop="description">You can create art and beauty on a computer.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">74</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/javyxu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;javyxu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2018 - 2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Javy</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'de44f4e91f73c590197c',
      clientSecret: '840b907d657247c9ddcbcec968b641fda5d3b969',
      repo        : 'javyxu.github.io',
      owner       : 'javyxu',
      admin       : ['javyxu'],
      id          : '2831d31d82143e38d542f63645e8dadd',
      proxy       : 'https://netnr-proxy.cloudno.de/https://github.com/login/oauth/access_token',
        language: 'en',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
